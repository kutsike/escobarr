<%- include('partials/header', { title, page }) %>

<div class="content-header">
  <h2><i class="fas fa-pray"></i> Dualar</h2>
  <div class="header-actions">
    <button class="btn btn-primary" onclick="document.getElementById('addDuaModal').style.display='block'">
      <i class="fas fa-plus"></i> Dua Ekle
    </button>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <% if (duas && duas.length > 0) { %>
      <table class="table">
        <thead>
          <tr>
            <th>Başlık</th>
            <th>Kategori</th>
            <th>Türkçe</th>
            <th>Kaynak</th>
          </tr>
        </thead>
        <tbody>
          <% duas.forEach(dua => { %>
            <tr>
              <td><strong><%= dua.title %></strong></td>
              <td><span class="badge badge-secondary"><%= dua.category || 'Genel' %></span></td>
              <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis;"><%= dua.turkish?.substring(0, 100) %>...</td>
              <td><%= dua.source || '-' %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } else { %>
      <div class="empty-state">
        <i class="fas fa-pray"></i>
        <h4>Dua Yok</h4>
        <p>Henüz dua eklenmemiş. "Dua Ekle" butonuna tıklayarak ekleyebilirsiniz.</p>
      </div>
    <% } %>
  </div>
</div>

<!-- Add Dua Modal -->
<div id="addDuaModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 1000; padding: 2rem;">
  <div class="card" style="max-width: 600px; margin: 2rem auto;">
    <div class="card-header">
      <h3><i class="fas fa-plus"></i> Yeni Dua Ekle</h3>
      <button class="btn btn-sm btn-secondary" onclick="document.getElementById('addDuaModal').style.display='none'">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="card-body">
      <form id="addDuaForm">
        <div class="form-group">
          <label class="form-label">Başlık</label>
          <input type="text" name="title" class="form-control" required>
        </div>
        <div class="form-group">
          <label class="form-label">Kategori</label>
          <select name="category" class="form-control form-select">
            <option value="sabah">Sabah Duaları</option>
            <option value="aksam">Akşam Duaları</option>
            <option value="namaz">Namaz Duaları</option>
            <option value="yemek">Yemek Duaları</option>
            <option value="genel">Genel</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Arapça</label>
          <textarea name="arabic" class="form-control" rows="2"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Okunuşu</label>
          <textarea name="transliteration" class="form-control" rows="2"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Türkçe Meali</label>
          <textarea name="turkish" class="form-control" rows="3" required></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Kaynak</label>
          <input type="text" name="source" class="form-control">
        </div>
        <button type="submit" class="btn btn-primary w-100">
          <i class="fas fa-save"></i> Kaydet
        </button>
      </form>
    </div>
  </div>
</div>

<script>
document.getElementById('addDuaForm')?.addEventListener('submit', async (e) => {
  e.preventDefault();
  const formData = new FormData(e.target);
  const data = Object.fromEntries(formData.entries());
  
  // TODO: API endpoint eklenecek
  showToast('Bilgi', 'Dua ekleme özelliği yakında aktif olacak', 'info');
  document.getElementById('addDuaModal').style.display = 'none';
});
</script>

<%- include('partials/footer') %>
